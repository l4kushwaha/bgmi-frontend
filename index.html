<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>BGMI Market | Home</title>
  <link rel="stylesheet" href="assets/poppins.css">
  <link rel="stylesheet" href="styles/index.css">
</head>
<body>

<!-- Floating bubbles -->
<script>
  for(let i=0;i<20;i++){
    const b=document.createElement("div");
    b.className="bubble";
    const s=Math.random()*80+20;
    b.style.width=b.style.height=s+"px";
    b.style.left=Math.random()*100+"vw";
    b.style.top=Math.random()*100+"vh";
    b.style.animationDelay=Math.random()*10+"s";
    document.body.appendChild(b);
  }
</script>

<header>
  <h1>üéÆ BGMI Market</h1>
  <nav>
    <ul>
      <li><a href="marketplace.html">Marketplace</a></li>
      <li><a href="sell.html">Sell ID</a></li>
      <li><a href="wallet.html">Wallet</a></li>
      <li><a href="profile.html">Profile</a></li>
      <li><a href="popularity.html">Popularity</a></li>
      <li><a href="chat.html">Message</a></li>
      <li id="adminNav" class="hidden">
        <a href="admin_dashboard.html">Admin Dashboard</a>
      </li>
      <li><a href="#" id="logoutBtn" class="hidden">Logout</a></li>
    </ul>
  </nav>
</header>

<main>

  <!-- GUEST -->
  <section id="guest-view">
    <h2>Welcome to BGMI Market üéØ</h2>
    <p>Please login to access marketplace & dashboard.</p>
    <button onclick="window.location='login.html'">Login</button>
  </section>

  <!-- USER -->
  <section id="user-dashboard" class="hidden">
    <h2 id="greeting">Welcome üëã</h2>
    <p>Manage your BGMI journey securely.</p>

    <div class="gallery-container">
      <!-- Card 1: Marketplace -->
      <div class="card-wrapper-1">
        <div class="inner-wrapper-1">
          <div class="border-layer-1">
            <div class="card-main-1"></div>
          </div>
          <div class="glow-1-layer-1"></div>
          <div class="glow-1-layer-2"></div>
        </div>
        <div class="overlay-1-1"></div>
        <div class="background-glow-1"></div>
        <div class="card-content">
          <div class="content-header">
            <a href="marketplace.html" class="glass-badge">Marketplace</a>
            <p class="card-title">Explore & Buy</p>
          </div>
          <hr class="card-divider" />
          <div class="content-footer">
            <p class="card-description">Browse BGMI accounts & items securely.</p>
          </div>
        </div>
      </div>

      <!-- Card 2: Popularity -->
      <div class="card-wrapper-2">
        <div class="inner-wrapper-2">
          <div class="border-layer-2">
            <div class="card-main-2"></div>
          </div>
          <div class="glow-2-layer-1"></div>
          <div class="glow-2-layer-2"></div>
        </div>
        <div class="overlay-2-1"></div>
        <div class="background-glow-2"></div>
        <div class="card-content">
          <div class="content-header">
            <a href="popularity.html" class="glass-badge">Popularity</a>
            <p class="card-title">Rank & Shine</p>
          </div>
          <hr class="card-divider" />
          <div class="content-footer">
            <p class="card-description">Check top players & trending accounts.</p>
          </div>
        </div>
      </div>

      <!-- Card 3: Profile -->
      <div class="card-wrapper-3">
        <div class="inner-wrapper-3">
          <div class="border-layer-3">
            <div class="card-main-3"></div>
          </div>
          <div class="glow-3-layer-1"></div>
          <div class="glow-3-layer-2"></div>
        </div>
        <div class="overlay-3-1"></div>
        <div class="background-glow-3"></div>
        <div class="card-content">
          <div class="content-header">
            <a href="profile.html" class="glass-badge">Profile</a>
            <p class="card-title">Your Space</p>
          </div>
          <hr class="card-divider" />
          <div class="content-footer">
            <p class="card-description">Manage account info, stats & settings.</p>
          </div>
        </div>
      </div>

    </div>
  </section>

</main>

<footer>
  ¬© 2025 BGMI Market | Built with ‚ù§Ô∏è by @am_sillent_hunter
</footer>

<script src="js/auth.js"></script>
<script>
  function updateDashboard() {
    const token = localStorage.getItem("token");
    const user = JSON.parse(localStorage.getItem("user"));

    const guest = document.getElementById("guest-view");
    const userDash = document.getElementById("user-dashboard");
    const logoutBtn = document.getElementById("logoutBtn");
    const adminNav = document.getElementById("adminNav");
    const greeting = document.getElementById("greeting");

    if (token && user) {
      guest.classList.add("hidden");
      userDash.classList.remove("hidden");
      logoutBtn.classList.remove("hidden");

      greeting.textContent = `Welcome back, ${user.name || "Player"} üëã`;

      if (user.role === "admin") {
        adminNav.classList.remove("hidden");
      }
    } else {
      guest.classList.remove("hidden");
      userDash.classList.add("hidden");
      logoutBtn.classList.add("hidden");
      adminNav.classList.add("hidden");
    }
  }

  updateDashboard();

  document.getElementById("logoutBtn").addEventListener("click", () => {
    if (window.logout) logout();
    localStorage.clear();
    location.reload();
  });
</script>

</body>
</html>
