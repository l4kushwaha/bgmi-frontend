<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Sell BGMI Account üíé</title>
<style>
* { margin:0; padding:0; box-sizing:border-box; font-family:"Poppins", sans-serif; }
body {
  height:100vh; overflow:hidden;
  background: url("https://i.ytimg.com/vi/aoV3MROF_OY/hq720.jpg?sqp=-oaymwEhCK4FEIIDSFryq4qpAxMIARUAAAAAGAElAADIQj0AgKJD&rs=AOn4CLCTHZ0jtDKlIZ1O0UfD9GytpmtpXQ") 
    no-repeat center center/cover;
  display:flex; justify-content:center; align-items:center; position:relative; color:#fff;
}
body::before { content:""; position:absolute; inset:0; background: rgba(0,0,0,0.45); z-index:0; }
form {
  position:relative; z-index:2; width:370px; padding:30px; border-radius:25px;
  background: rgba(255,255,255,0.08); border:1px solid rgba(255,255,255,0.25);
  box-shadow: 0 0 40px rgba(0,255,255,0.2);
}
h2 { text-align:center; font-weight:700; font-size:1.6em; margin-bottom:18px; color:#00ffff;
  text-shadow:0 0 10px #0ff,0 0 20px #ff00ff,0 0 30px #00ffff;
}
input, button {
  width:100%; padding:12px; border-radius:12px; margin:10px 0; font-size:14px; border:none; outline:none;
}
input { background: rgba(255,255,255,0.12); color:white; }
input::placeholder { color: rgba(255,255,255,0.7); }
input:focus { background: rgba(255,255,255,0.25); box-shadow:0 0 15px rgba(0,255,255,0.6); }
button { background: linear-gradient(135deg,#00ffff,#ff00ff); color:#fff; font-weight:700; cursor:pointer; }
#estimatedPrice { text-align:center; color:#00ffff; font-weight:bold; margin:10px 0; text-shadow:0 0 10px #0ff; }
</style>
</head>
<body>

<form id="sellForm">
  <h2>Sell Your BGMI Account</h2>
  <input type="text" id="username" placeholder="BGMI Username" required>
  <input type="number" id="level" placeholder="Account Level" required>
  <input type="number" id="mythicItems" placeholder="Mythic Items Count">
  <input type="number" id="xSuits" placeholder="X-Suits Count">
  <input type="text" id="highlights" placeholder="Highlights (comma separated)">
  <button type="button" onclick="estimateValue()">Estimate Price</button>
  <div id="estimatedPrice"></div>
  <button type="submit">List for Sale</button>
</form>

<script>
const API_URL = "https://marketplace-worker.bgmi-gateway.workers.dev/api/market";

function estimateValue() {
  const level = parseInt(document.getElementById("level").value)||0;
  const mythic = parseInt(document.getElementById("mythicItems").value)||0;
  const xsuit = parseInt(document.getElementById("xSuits").value)||0;
  const highlights = document.getElementById("highlights").value.split(",").filter(h=>h.trim());
  const price = (level*10) + (mythic*500) + (xsuit*2000) + (highlights.length*100);
  document.getElementById("estimatedPrice").innerText = `üí∞ Estimated Value: ‚Çπ${price}`;
}

document.getElementById("sellForm").addEventListener("submit", async (e)=>{
  e.preventDefault();
  const username = document.getElementById("username").value.trim();
  const level = parseInt(document.getElementById("level").value)||0;
  const mythic = parseInt(document.getElementById("mythicItems").value)||0;
  const xsuit = parseInt(document.getElementById("xSuits").value)||0;
  const highlights = document.getElementById("highlights").value.split(",").filter(h=>h.trim());
  const price = (level*10) + (mythic*500) + (xsuit*2000) + (highlights.length*100);

  const payload = { username, level, mythic, xsuit, highlights, price, status:"Available" };

  try {
    const res = await fetch(`${API_URL}/list`, {
      method:"POST",
      headers: {"Content-Type":"application/json"},
      body: JSON.stringify(payload)
    });
    if(!res.ok) throw new Error("Failed to list account");
    alert("üéâ Account listed successfully!");
    document.getElementById("sellForm").reset();
    document.getElementById("estimatedPrice").innerText="";
  } catch(err) {
    alert("‚ùå "+err.message);
  }
});
</script>

</body>
</html>
